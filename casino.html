<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>WS3EQR | CYBER CASINO</title>
    
    <!-- FONTS & ICONS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">

    <style>
        /* --- 0. SYSTEM CORE STYLES --- */
        :root {
            --bg-deep: #050505;
            --bg-panel: #0f0f12;
            --accent: #00ff88;
            --accent-dim: rgba(0, 255, 136, 0.1);
            --text-main: #ffffff;
            --text-sec: #888888;
            --gold: #ffd700;
            --danger: #ff4444;
            --purple: #bc13fe;
            --glass: rgba(20, 20, 25, 0.8);
            --border: rgba(255, 255, 255, 0.08);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; user-select: none; -webkit-tap-highlight-color: transparent; }
        
        body {
            background-color: var(--bg-deep);
            color: var(--text-main);
            font-family: 'Rajdhani', sans-serif;
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* --- 1. BOOT SCREEN (–ó–ê–ì–†–£–ó–ö–ê) --- */
        #boot-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 9999;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: opacity 0.8s ease;
        }
        .boot-logo {
            font-family: 'Orbitron'; font-size: 4rem; font-weight: 900; letter-spacing: 5px;
            color: #fff; text-shadow: 0 0 20px var(--accent);
            animation: glitch 1s infinite alternate;
        }
        .boot-bar {
            width: 200px; height: 2px; background: #222; margin-top: 30px; position: relative; overflow: hidden;
        }
        .boot-fill {
            position: absolute; top: 0; left: 0; height: 100%; width: 0%; background: var(--accent);
            box-shadow: 0 0 10px var(--accent); animation: loadBar 2.5s forwards cubic-bezier(0.2, 0.8, 0.2, 1);
        }
        @keyframes glitch {
            0% { text-shadow: 2px 2px 0px #f0f, -2px -2px 0px #0ff; }
            100% { text-shadow: -2px 2px 0px #f0f, 2px -2px 0px #0ff; }
        }
        @keyframes loadBar { to { width: 100%; } }

        /* --- 2. HEADER (HUD) --- */
        .hud-bar {
            height: 70px; background: var(--glass); border-bottom: 1px solid var(--border);
            backdrop-filter: blur(15px); display: flex; align-items: center; justify-content: space-between;
            padding: 0 30px; z-index: 100;
        }
        .logo-area { font-family: 'Orbitron'; font-weight: 700; font-size: 1.2rem; letter-spacing: 2px; color: #fff; }
        .logo-area span { color: var(--accent); }

        .balance-display {
            background: rgba(0,0,0,0.3); border: 1px solid var(--border);
            padding: 8px 20px; border-radius: 8px; display: flex; flex-direction: column;
            align-items: flex-end; min-width: 140px; transition: 0.3s; cursor: pointer;
        }
        .balance-display:hover { border-color: var(--accent); box-shadow: 0 0 15px var(--accent-dim); }
        .bal-label { font-size: 0.7rem; color: var(--text-sec); text-transform: uppercase; letter-spacing: 1px; }
        .bal-val { font-family: 'Orbitron'; font-size: 1.3rem; color: var(--accent); text-shadow: 0 0 10px rgba(0,255,136,0.3); }

        /* --- 3. MAIN CONTENT (LOBBY) --- */
        .app-container { flex: 1; overflow-y: auto; padding: 30px; position: relative; }
        
        .section-title { font-family: 'Orbitron'; font-size: 1.5rem; margin-bottom: 20px; border-left: 4px solid var(--accent); padding-left: 15px; }
        
        .games-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 25px;
            padding-bottom: 50px;
        }
        .game-card {
            background: var(--bg-panel); border: 1px solid var(--border); border-radius: 16px;
            height: 280px; position: relative; overflow: hidden; cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .game-card:hover { transform: translateY(-8px); border-color: var(--accent); box-shadow: 0 15px 40px rgba(0,0,0,0.5); }
        .game-icon { font-size: 4rem; margin-bottom: 20px; transition: 0.3s; filter: drop-shadow(0 0 10px rgba(255,255,255,0.2)); }
        .game-card:hover .game-icon { transform: scale(1.1); filter: drop-shadow(0 0 20px var(--accent)); }
        .game-name { font-family: 'Orbitron'; font-size: 1.2rem; font-weight: 700; z-index: 2; }
        .play-btn {
            margin-top: 20px; padding: 10px 25px; background: var(--accent); color: #000;
            border: none; border-radius: 30px; font-weight: 800; font-size: 0.9rem;
            opacity: 0; transform: translateY(20px); transition: 0.3s;
        }
        .game-card:hover .play-btn { opacity: 1; transform: translateY(0); }

        /* --- 4. GAME OVERLAY (–û–ö–ù–û –ò–ì–†–´) --- */
        #game-interface {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-deep); z-index: 200; display: none; flex-direction: column;
            animation: slideUp 0.4s cubic-bezier(0.2, 1, 0.3, 1);
        }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }

        .gi-header {
            height: 60px; background: var(--bg-panel); border-bottom: 1px solid var(--border);
            display: flex; align-items: center; justify-content: space-between; padding: 0 20px;
        }
        .gi-back { color: var(--text-sec); cursor: pointer; transition: 0.2s; font-weight: bold; display: flex; align-items: center; gap: 10px; }
        .gi-back:hover { color: #fff; }
        .gi-title { font-family: 'Orbitron'; color: var(--accent); font-size: 1.2rem; }
        .gi-bal { font-family: 'Orbitron'; font-size: 1.1rem; color: #fff; }

        .gi-body { flex: 1; display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden; }

        /* --- 5. GAME UI ELEMENTS (–ö–Ω–æ–ø–∫–∏, –ò–Ω–ø—É—Ç—ã) --- */
        .control-bar {
            position: absolute; bottom: 30px; background: rgba(20,20,20,0.9);
            padding: 15px 30px; border-radius: 15px; border: 1px solid var(--border);
            display: flex; gap: 15px; align-items: center; backdrop-filter: blur(10px);
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }
        .bet-input-group { display: flex; flex-direction: column; }
        .bet-label { font-size: 0.7rem; color: #888; margin-bottom: 5px; text-transform: uppercase; }
        .bet-input {
            background: #000; border: 1px solid #444; color: #fff; padding: 10px;
            border-radius: 6px; width: 120px; text-align: center; font-family: 'Orbitron'; font-size: 1.1rem;
        }
        .action-btn {
            height: 50px; padding: 0 40px; background: var(--accent); color: #000;
            border: none; border-radius: 8px; font-weight: 900; font-size: 1.2rem; font-family: 'Orbitron';
            cursor: pointer; transition: 0.2s; box-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
        }
        .action-btn:hover { transform: scale(1.05); box-shadow: 0 0 30px var(--accent); }
        .action-btn:active { transform: scale(0.95); }
        .action-btn:disabled { background: #333; color: #555; box-shadow: none; cursor: not-allowed; transform: none; }
        .btn-red { background: var(--danger); color: #fff; box-shadow: 0 0 20px rgba(255, 68, 68, 0.3); }
        .btn-red:hover { box-shadow: 0 0 30px var(--danger); }

        /* --- NOTIFICATION --- */
        #notif {
            position: fixed; top: 90px; right: 20px; background: #1a1a1a; border-left: 4px solid var(--accent);
            padding: 15px 25px; border-radius: 6px; color: #fff; font-weight: bold;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); transform: translateX(200%); transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); z-index: 9999;
        }
        #notif.show { transform: translateX(0); }

        /* --- BONUS MODAL --- */
        .modal-overlay {
            position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.8);
            z-index: 5000; display: none; align-items: center; justify-content: center;
            backdrop-filter: blur(5px);
        }
        .modal {
            background: #111; border: 1px solid var(--border); padding: 40px; border-radius: 20px;
            text-align: center; max-width: 400px; box-shadow: 0 0 50px rgba(0,0,0,0.8);
            animation: popIn 0.3s;
        }
        @keyframes popIn { from {transform: scale(0.8); opacity:0;} to {transform: scale(1); opacity:1;} }

        /* --- MOBILE --- */
        @media (max-width: 600px) {
            .hud-bar { padding: 0 15px; }
            .games-grid { grid-template-columns: 1fr 1fr; gap: 15px; }
            .game-card { height: 200px; }
            .control-bar { width: 90%; flex-direction: column; bottom: 20px; }
            .action-btn { width: 100%; }
        }
    </style>
</head>
<body>

    <!-- 1. BOOT SCREEN -->
    <div id="boot-screen">
        <div class="boot-logo">WS3EQR</div>
        <div class="boot-bar"><div class="boot-fill"></div></div>
    </div>

    <!-- 2. UI STRUCTURE -->
    <div class="hud-bar">
        <div class="logo-area">WS3EQR <span>CASINO</span></div>
        <div class="balance-display" onclick="Core.checkBonus()">
            <span class="bal-label">Wallet Balance</span>
            <span class="bal-val">$<span id="ui-balance">0.00</span></span>
        </div>
    </div>

    <!-- LOBBY -->
    <div class="app-container" id="lobby">
        <h2 class="section-title">FEATURED GAMES</h2>
        <div class="games-grid" id="grid">
            <!-- JS GENERATED -->
        </div>
    </div>

    <!-- GAME CONTAINER -->
    <div id="game-interface">
        <div class="gi-header">
            <div class="gi-back" onclick="GameSys.exit()"><i class="fa-solid fa-arrow-left"></i> EXIT</div>
            <div class="gi-title" id="g-title">GAME NAME</div>
            <div class="gi-bal">$<span id="g-balance">0</span></div>
        </div>
        <div class="gi-body" id="g-canvas"></div>
    </div>

    <!-- NOTIFICATION & MODALS -->
    <div id="notif">Notification</div>
    
    <div class="modal-overlay" id="bonus-modal">
        <div class="modal">
            <i class="fa-solid fa-gift" style="font-size: 3rem; color: var(--gold); margin-bottom: 20px;"></i>
            <h2 style="font-family:'Orbitron'; margin-bottom:10px;">BANKRUPT?</h2>
            <p style="color:#888; margin-bottom:20px;">Here is a small gift to get you back in the game.</p>
            <button class="action-btn" onclick="Core.claimBonus()">CLAIM $100</button>
        </div>
    </div>
<script>
        // --- –ß–ê–°–¢–¨ 2: –°–ò–°–¢–ï–ú–ù–û–ï –Ø–î–†–û –ò –õ–û–ì–ò–ö–ê –ò–ì–† ---

        // –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï
        let USER = {
            balance: 100.00, // –°—Ç–∞—Ä—Ç–æ–≤—ã–π –±–∞–ª–∞–Ω—Å
            xp: 0,
            level: 1
        };

        // --- 1. CORE SYSTEM (–Ø–î–†–û) ---
        const Core = {
            init: () => {
                // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π
                const save = localStorage.getItem('ws3_casino_save');
                if (save) {
                    USER = JSON.parse(save);
                } else {
                    USER.balance = 100.00; // –ï—Å–ª–∏ –Ω–æ–≤—ã–π –∏–≥—Ä–æ–∫
                }
                
                UI.updateBalance();
                Core.renderLobby();
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–æ
                if(USER.balance < 1) setTimeout(() => Core.checkBonus(), 2000);
            },

            save: () => {
                localStorage.setItem('ws3_casino_save', JSON.stringify(USER));
                UI.updateBalance();
            },

            // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (Toast)
            notify: (msg, type = 'win') => {
                const n = document.getElementById('notif');
                n.innerHTML = msg;
                n.style.borderLeftColor = type === 'lose' ? 'var(--danger)' : 'var(--accent)';
                n.classList.add('show');
                setTimeout(() => n.classList.remove('show'), 3000);
            },

            // –°–∏—Å—Ç–µ–º–∞ –ë–æ–Ω—É—Å–∞ (–≤–º–µ—Å—Ç–æ –¥–µ–ø–æ–∑–∏—Ç–∞)
            checkBonus: () => {
                if (USER.balance < 1) {
                    document.getElementById('bonus-modal').style.display = 'flex';
                } else {
                    Core.notify("Bonus available only if balance < $1", "lose");
                }
            },

            claimBonus: () => {
                USER.balance += 100;
                Core.save();
                document.getElementById('bonus-modal').style.display = 'none';
                Core.notify("BONUS CLAIMED: +$100");
            }
        };

        // --- 2. WALLET SYSTEM ---
        const Wallet = {
            bet: (amount) => {
                amount = parseFloat(amount);
                if (isNaN(amount) || amount <= 0) { Core.notify("Invalid Bet", "lose"); return false; }
                if (USER.balance < amount) { Core.notify("Insufficient Funds", "lose"); Core.checkBonus(); return false; }
                
                USER.balance -= amount;
                USER.xp += amount * 0.1; // –ü—Ä–æ–∫–∞—á–∫–∞ —É—Ä–æ–≤–Ω—è
                Core.save();
                return true;
            },

            win: (amount) => {
                USER.balance += amount;
                Core.save();
                // –ê–Ω–∏–º–∞—Ü–∏—è –≤—ã–∏–≥—Ä—ã—à–∞ –≤ UI
                const el = document.getElementById('ui-balance');
                el.style.color = '#fff';
                el.style.textShadow = "0 0 20px #fff";
                setTimeout(() => { el.style.color = 'var(--accent)'; el.style.textShadow = "none"; }, 500);
            }
        };

        // --- 3. UI RENDERER ---
        const UI = {
            updateBalance: () => {
                const val = USER.balance.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
                document.getElementById('ui-balance').innerText = val;
                if(document.getElementById('g-balance')) document.getElementById('g-balance').innerText = val;
            }
        };

        // –°–ü–ò–°–û–ö –ò–ì–†
        const GAMES = [
            { id: 'slots', name: 'NEON SLOTS', icon: 'üé∞', color: '#bc13fe' },
            { id: 'mines', name: 'CYBER MINES', icon: 'üí£', color: '#ff4444' },
            { id: 'crash', name: 'CRASH RUN', icon: 'üìà', color: '#00ff88' },
            { id: 'plinko', name: 'PLINKO BALL', icon: 'üîÆ', color: '#ffd700' }
        ];

        // --- 4. GAME SYSTEM ---
        const GameSys = {
            active: null,

            open: (id) => {
                const game = GAMES.find(g => g.id === id);
                document.getElementById('game-interface').style.display = 'flex';
                document.getElementById('g-title').innerText = game.name;
                const canvas = document.getElementById('g-canvas');
                canvas.innerHTML = ''; // –û—á–∏—Å—Ç–∫–∞
                
                GameSys.active = id;
                
                // –ó–∞–ø—É—Å–∫ –ª–æ–≥–∏–∫–∏ –∏–≥—Ä—ã
                if(id === 'slots') Slots.init(canvas);
                if(id === 'mines') Mines.init(canvas);
                if(id === 'crash') Crash.init(canvas); // –ë—É–¥–µ—Ç –≤ –ß–∞—Å—Ç–∏ 3
                if(id === 'plinko') Plinko.init(canvas); // –ë—É–¥–µ—Ç –≤ –ß–∞—Å—Ç–∏ 3
            },

            exit: () => {
                document.getElementById('game-interface').style.display = 'none';
                GameSys.active = null;
                // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ü–∏–∫–ª—ã –∏–≥—Ä –µ—Å–ª–∏ –µ—Å—Ç—å
                if(Crash.running) Crash.stop();
                if(Plinko.running) Plinko.stop();
            }
        };

        Core.renderLobby = () => {
            const grid = document.getElementById('grid');
            GAMES.forEach(g => {
                const card = document.createElement('div');
                card.className = 'game-card';
                card.onclick = () => GameSys.open(g.id);
                card.innerHTML = `
                    <div class="game-icon" style="color:${g.color}">${g.icon}</div>
                    <div class="game-name">${g.name}</div>
                    <button class="play-btn">PLAY NOW</button>
                `;
                grid.appendChild(card);
            });
        };

        // --- 5. GAME: NEON SLOTS ---
        const Slots = {
            init: (container) => {
                container.innerHTML = `
                    <div style="display:flex; flex-direction:column; align-items:center; gap:30px;">
                        <style>
                            .slot-row { display:flex; gap:10px; background:#000; padding:15px; border-radius:15px; border:2px solid var(--purple); box-shadow:0 0 30px rgba(188, 19, 254, 0.2); }
                            .reel { width:80px; height:100px; background:#fff; border-radius:8px; font-size:3rem; display:flex; align-items:center; justify-content:center; box-shadow:inset 0 0 15px #000; color:#000; }
                        </style>
                        <div class="slot-row">
                            <div class="reel" id="r1">üçí</div>
                            <div class="reel" id="r2">üçí</div>
                            <div class="reel" id="r3">üçí</div>
                        </div>
                        <div class="control-bar">
                            <div class="bet-input-group">
                                <span class="bet-label">BET AMOUNT</span>
                                <input type="number" id="s-bet" class="bet-input" value="10">
                            </div>
                            <button class="action-btn" onclick="Slots.spin()" style="background:var(--purple); box-shadow:0 0 20px rgba(188, 19, 254, 0.4)">SPIN</button>
                        </div>
                    </div>
                `;
            },
            spin: () => {
                const bet = document.getElementById('s-bet').value;
                if(!Wallet.bet(bet)) return;

                const syms = ['üçí','üçã','üçá','üíé','7Ô∏è‚É£'];
                const reels = [document.getElementById('r1'), document.getElementById('r2'), document.getElementById('r3')];
                
                let steps = 0;
                const interval = setInterval(() => {
                    reels.forEach(r => r.innerText = syms[Math.floor(Math.random()*syms.length)]);
                    steps++;
                    if(steps > 10) {
                        clearInterval(interval);
                        Slots.checkWin(bet, reels, syms);
                    }
                }, 100);
            },
            checkWin: (bet, reels, syms) => {
                // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
                const r1 = syms[Math.floor(Math.random()*syms.length)];
                const r2 = syms[Math.floor(Math.random()*syms.length)];
                const r3 = Math.random() > 0.7 ? r1 : syms[Math.floor(Math.random()*syms.length)]; // 30% —à–∞–Ω—Å —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è 1 –∏ 3

                reels[0].innerText = r1; reels[1].innerText = r2; reels[2].innerText = r3;

                if(r1 === r2 && r2 === r3) {
                    let mult = 10;
                    if(r1 === 'üíé') mult = 50;
                    if(r1 === '7Ô∏è‚É£') mult = 100;
                    const win = bet * mult;
                    Wallet.win(win);
                    Core.notify(`JACKPOT! $${win}`);
                } else if(r1 === r2 || r2 === r3 || r1 === r3) {
                    const win = bet * 2;
                    Wallet.win(win);
                    Core.notify(`WIN! $${win}`);
                }
            }
        };

        // --- 6. GAME: CYBER MINES ---
        const Mines = {
            grid: [], bombs: [], active: false, bet: 0, mult: 1.0,
            
            init: (c) => {
                c.innerHTML = `
                    <div style="display:flex; flex-direction:column; align-items:center;">
                        <style>
                            .mine-grid { display:grid; grid-template-columns:repeat(5, 1fr); gap:10px; margin-bottom:20px; }
                            .tile { width:50px; height:50px; background:#222; border-radius:8px; cursor:pointer; display:flex; align-items:center; justify-content:center; font-size:1.5rem; transition:0.2s; border:1px solid #333; }
                            .tile:hover { background:#333; border-color:var(--accent); }
                            .tile.safe { background:#0f3; box-shadow:0 0 15px #0f3; border:none; }
                            .tile.boom { background:var(--danger); animation:shake 0.3s; }
                            @keyframes shake { 0%{transform:translateX(0)} 25%{transform:translateX(5px)} 75%{transform:translateX(-5px)} 100%{transform:translateX(0)} }
                        </style>
                        <div class="mine-grid" id="m-grid"></div>
                        <div class="control-bar">
                            <div class="bet-input-group" id="m-controls">
                                <span class="bet-label">BET</span>
                                <input type="number" id="m-bet" class="bet-input" value="50">
                            </div>
                            <div class="bet-input-group" id="m-bombs-grp">
                                <span class="bet-label">BOMBS (1-24)</span>
                                <input type="number" id="m-bombs" class="bet-input" value="3" max="24" min="1">
                            </div>
                            <button class="action-btn" id="m-btn" onclick="Mines.start()">START</button>
                            <button class="action-btn" id="m-cashout" onclick="Mines.cashout()" style="display:none; background:var(--gold)">TAKE</button>
                        </div>
                    </div>
                `;
                Mines.renderBoard();
            },
            renderBoard: () => {
                const b = document.getElementById('m-grid');
                b.innerHTML = '';
                for(let i=0; i<25; i++) {
                    const t = document.createElement('div');
                    t.className = 'tile';
                    t.onclick = () => Mines.click(i, t);
                    b.appendChild(t);
                }
            },
            start: () => {
                const bet = parseFloat(document.getElementById('m-bet').value);
                const bCount = parseInt(document.getElementById('m-bombs').value);
                
                if(bCount < 1 || bCount > 24) { Core.notify("Bad Bombs Count", "lose"); return; }
                if(!Wallet.bet(bet)) return;

                Mines.bet = bet;
                Mines.active = true;
                Mines.mult = 1.0;
                Mines.bombs = [];
                
                // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–æ–º–±
                while(Mines.bombs.length < bCount) {
                    let r = Math.floor(Math.random()*25);
                    if(!Mines.bombs.includes(r)) Mines.bombs.push(r);
                }

                Mines.renderBoard(); // –°–±—Ä–æ—Å –ø–æ–ª—è
                document.getElementById('m-btn').style.display = 'none';
                document.getElementById('m-controls').style.display = 'none';
                document.getElementById('m-bombs-grp').style.display = 'none';
                document.getElementById('m-cashout').style.display = 'block';
                Mines.updateBtn();
            },
            click: (idx, el) => {
                if(!Mines.active || el.classList.contains('revealed')) return;
                
                el.classList.add('revealed');
                
                if(Mines.bombs.includes(idx)) {
                    el.classList.add('boom');
                    el.innerHTML = 'üí£';
                    Mines.end(false);
                } else {
                    el.classList.add('safe');
                    el.innerHTML = 'üíé';
                    Mines.mult *= 1.2; // –ü—Ä–æ—Å—Ç–æ–π –º–Ω–æ–∂–∏—Ç–µ–ª—å
                    Mines.updateBtn();
                }
            },
            updateBtn: () => {
                const win = (Mines.bet * Mines.mult).toFixed(2);
                document.getElementById('m-cashout').innerText = `TAKE $${win}`;
            },
            cashout: () => {
                const win = Mines.bet * Mines.mult;
                Wallet.win(win);
                Core.notify(`WON $${win.toFixed(2)}`);
                Mines.end(true);
            },
            end: (win) => {
                Mines.active = false;
                document.getElementById('m-btn').style.display = 'block';
                document.getElementById('m-controls').style.display = 'flex';
                document.getElementById('m-bombs-grp').style.display = 'flex';
                document.getElementById('m-cashout').style.display = 'none';
                
                // –ü–æ–∫–∞–∑–∞—Ç—å –±–æ–º–±—ã
                const tiles = document.querySelectorAll('.tile');
                tiles.forEach((t, i) => {
                    if(Mines.bombs.includes(i)) {
                        t.innerHTML = 'üí£';
                        if(!win) t.style.opacity = 0.5;
                    }
                });
            }
        };
// --- 7. GAME: CRASH (AVIATOR) ---
        const Crash = {
            running: false, multiplier: 1.00, bet: 0, crashPoint: 0, interval: null,
            canvas: null, ctx: null, x: 0, y: 0,

            init: (c) => {
                c.innerHTML = `
                    <div style="display:flex; flex-direction:column; align-items:center; width:100%;">
                        <div style="position:relative; width:100%; height:300px; background:#000; border:1px solid #333; border-radius:10px; overflow:hidden;">
                            <canvas id="crash-canvas" style="width:100%; height:100%;"></canvas>
                            <div id="crash-val" style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); font-size:4rem; font-weight:900; color:#fff; z-index:10;">1.00x</div>
                        </div>
                        <div class="control-bar" style="margin-top:20px;">
                            <div class="bet-input-group">
                                <span class="bet-label">BET</span>
                                <input type="number" id="c-bet" class="bet-input" value="100">
                            </div>
                            <button class="action-btn" id="c-btn" onclick="Crash.action()">BET</button>
                        </div>
                    </div>
                `;
                Crash.canvas = document.getElementById('crash-canvas');
                Crash.ctx = Crash.canvas.getContext('2d');
                // –§–∏–∫—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–∞–Ω–≤–∞—Å–∞
                const rect = Crash.canvas.getBoundingClientRect();
                Crash.canvas.width = rect.width;
                Crash.canvas.height = rect.height;
            },

            action: () => {
                const btn = document.getElementById('c-btn');
                
                if(!Crash.running) {
                    // START
                    const bet = parseFloat(document.getElementById('c-bet').value);
                    if(!Wallet.bet(bet)) return;
                    
                    Crash.bet = bet;
                    Crash.running = true;
                    Crash.multiplier = 1.00;
                    Crash.crashPoint = Crash.getCrashPoint(); // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ—á–∫–∏ –∫—Ä–∞—à–∞
                    Crash.x = 0; 
                    Crash.y = Crash.canvas.height;
                    
                    btn.innerText = "CASHOUT";
                    btn.style.background = "#ffd700";
                    document.getElementById('crash-val').style.color = "#fff";
                    
                    Crash.loop();
                } else {
                    // CASHOUT
                    Crash.stop();
                    const win = Crash.bet * Crash.multiplier;
                    Wallet.win(win);
                    Core.notify(`ESCAPED @ ${Crash.multiplier.toFixed(2)}x (+$${win.toFixed(2)})`);
                    document.getElementById('c-btn').innerText = "WAIT...";
                    document.getElementById('c-btn').disabled = true;
                }
            },

            loop: () => {
                if(!Crash.running) return;

                Crash.multiplier += 0.01 + (Crash.multiplier * 0.002); // –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π —Ä–æ—Å—Ç
                
                // –û—Ç—Ä–∏—Å–æ–≤–∫–∞
                const ctx = Crash.ctx;
                const w = Crash.canvas.width;
                const h = Crash.canvas.height;
                
                document.getElementById('crash-val').innerText = Crash.multiplier.toFixed(2) + 'x';

                // –õ–æ–≥–∏–∫–∞ –ö—Ä–∞—à–∞
                if(Crash.multiplier >= Crash.crashPoint) {
                    Crash.crash();
                    return;
                }

                // –†–∏—Å—É–µ–º –≥—Ä–∞—Ñ–∏–∫
                ctx.fillStyle = "rgba(0,0,0,0.1)"; // –°–ª–µ–¥
                ctx.fillRect(0,0,w,h);
                
                ctx.beginPath();
                ctx.moveTo(0, h);
                // –ü—Ä–æ—Å—Ç–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–æ—Å—Ç–∞ –∫—Ä–∏–≤–æ–π
                const progress = Math.min((Crash.multiplier - 1) / 2, 1); // –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞
                ctx.lineTo(w * progress, h - (h * progress));
                ctx.strokeStyle = "#00ff88";
                ctx.lineWidth = 5;
                ctx.stroke();

                requestAnimationFrame(Crash.loop);
            },

            crash: () => {
                Crash.running = false;
                const el = document.getElementById('crash-val');
                el.innerText = "CRASHED @ " + Crash.multiplier.toFixed(2) + "x";
                el.style.color = "#ff4444";
                
                const btn = document.getElementById('c-btn');
                btn.innerText = "BET";
                btn.style.background = "var(--accent)";
                btn.disabled = false;
            },

            stop: () => {
                Crash.running = false;
                // –ò–≥—Ä–æ–∫ –∑–∞–±—Ä–∞–ª –¥–µ–Ω—å–≥–∏, –Ω–æ –≥—Ä–∞—Ñ–∏–∫ –º–æ–∂–µ—Ç –ª–µ—Ç–µ—Ç—å –¥–∞–ª—å—à–µ (–≤–∏–∑—É–∞–ª—å–Ω–æ –∑–¥–µ—Å—å –º—ã –ø—Ä–æ—Å—Ç–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è)
                const btn = document.getElementById('c-btn');
                btn.innerText = "BET";
                btn.style.background = "var(--accent)";
            },

            getCrashPoint: () => {
                // –ê–ª–≥–æ—Ä–∏—Ç–º Provably Fair (—É–ø—Ä–æ—â–µ–Ω–Ω—ã–π)
                // 1% —à–∞–Ω—Å –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –∫—Ä–∞—à–∞ (1.00x)
                if(Math.random() < 0.01) return 1.00;
                // E = 100 / (1-R)
                const r = Math.random();
                const result = 0.99 / (1 - r);
                return Math.max(1.00, Math.min(result, 1000)); // –ú–∞–∫—Å 1000x
            }
        };

        // --- 8. GAME: PLINKO (PHYSICS) ---
        const Plinko = {
            running: false,
            canvas: null, ctx: null,
            rows: 10,
            pegs: [],
            ball: null,
            
            init: (c) => {
                c.innerHTML = `
                    <div style="display:flex; flex-direction:column; align-items:center;">
                        <canvas id="plinko-canvas" width="400" height="400" style="background:#111; border-radius:10px;"></canvas>
                        <div class="control-bar" style="margin-top:10px;">
                            <div class="bet-input-group">
                                <span class="bet-label">BET</span>
                                <input type="number" id="p-bet" class="bet-input" value="50">
                            </div>
                            <button class="action-btn" onclick="Plinko.drop()">DROP</button>
                        </div>
                    </div>
                `;
                Plinko.canvas = document.getElementById('plinko-canvas');
                Plinko.ctx = Plinko.canvas.getContext('2d');
                Plinko.setupBoard();
                Plinko.render();
            },

            setupBoard: () => {
                Plinko.pegs = [];
                const spacing = 30;
                const startX = 200;
                const startY = 50;
                
                for(let r=0; r<Plinko.rows; r++) {
                    for(let c=0; c<=r; c++) {
                        Plinko.pegs.push({
                            x: startX - (r * spacing / 2) + (c * spacing),
                            y: startY + (r * spacing * 0.9), // 0.9 –¥–ª—è –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏
                            r: 3
                        });
                    }
                }
            },

            drop: () => {
                if(Plinko.running) return; // –ñ–¥–µ–º –ø–æ–∫–∞ —à–∞—Ä–∏–∫ —É–ø–∞–¥–µ—Ç
                const bet = parseFloat(document.getElementById('p-bet').value);
                if(!Wallet.bet(bet)) return;
                
                Plinko.betAmount = bet;
                Plinko.running = true;
                Plinko.ball = { x: 200, y: 20, vx: 0, vy: 0 };
                
                Plinko.animate();
            },

            animate: () => {
                if(!Plinko.running) return;
                
                const ctx = Plinko.ctx;
                const ball = Plinko.ball;
                
                // –§–∏–∑–∏–∫–∞ (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏)
                ball.vy += 0.5; // –ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è
                ball.y += ball.vy;
                ball.x += (Math.random() - 0.5) * 2; // –î—Ä–æ–∂–∞–Ω–∏–µ

                // –ö–æ–ª–ª–∏–∑–∏–∏ —Å –∫–æ–ª—ã—à–∫–∞–º–∏
                Plinko.pegs.forEach(p => {
                    const dx = ball.x - p.x;
                    const dy = ball.y - p.y;
                    const dist = Math.sqrt(dx*dx + dy*dy);
                    if(dist < 8) { // –†–∞–¥–∏—É—Å —à–∞—Ä–∞ + –∫–æ–ª—ã—à–∫–∞
                        ball.vy *= -0.5; // –û—Ç—Å–∫–æ–∫
                        ball.y = p.y - 8;
                        // –†–µ—à–∞–µ–º –∫—É–¥–∞ –æ—Ç—Å–∫–æ—á–∏—Ç (–†–∞–Ω–¥–æ–º–Ω–æ –≤–ª–µ–≤–æ –∏–ª–∏ –≤–ø—Ä–∞–≤–æ)
                        const dir = Math.random() > 0.5 ? 1 : -1;
                        ball.x += dir * 15; 
                    }
                });

                Plinko.render();

                // –§–∏–Ω–∏—à
                if(ball.y > 350) {
                    Plinko.running = false;
                    Plinko.finish();
                } else {
                    requestAnimationFrame(Plinko.animate);
                }
            },

            render: () => {
                const ctx = Plinko.ctx;
                ctx.clearRect(0,0,400,400);
                
                // –ö–æ–ª—ã—à–∫–∏
                ctx.fillStyle = "#fff";
                Plinko.pegs.forEach(p => {
                    ctx.beginPath(); ctx.arc(p.x, p.y, p.r, 0, Math.PI*2); ctx.fill();
                });

                // –°–ª–æ—Ç—ã –º–Ω–æ–∂–∏—Ç–µ–ª–µ–π (–≤–Ω–∏–∑—É)
                const mults = [10, 3, 1.5, 1, 0.5, 0.2, 0.5, 1, 1.5, 3, 10]; // 11 —Å–ª–æ—Ç–æ–≤
                const slotW = 35;
                const startX = 200 - (mults.length * slotW / 2);
                
                mults.forEach((m, i) => {
                    const x = startX + (i * slotW);
                    const color = m > 1 ? (m > 5 ? '#bc13fe' : '#00ff88') : '#444';
                    ctx.fillStyle = color;
                    ctx.fillRect(x + 2, 360, slotW - 4, 30);
                    ctx.fillStyle = "#000";
                    ctx.font = "10px Arial";
                    ctx.fillText(m+"x", x + 8, 380);
                });

                // –®–∞—Ä–∏–∫
                if(Plinko.ball) {
                    ctx.fillStyle = "#ffd700";
                    ctx.beginPath(); ctx.arc(Plinko.ball.x, Plinko.ball.y, 6, 0, Math.PI*2); ctx.fill();
                }
            },

            finish: () => {
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫—É–¥–∞ —É–ø–∞–ª (–ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–µ X)
                // –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞: —á–µ–º –¥–∞–ª—å—à–µ –æ—Ç —Ü–µ–Ω—Ç—Ä–∞, —Ç–µ–º –±–æ–ª—å—à–µ –≤—ã–∏–≥—Ä—ã—à
                const distFromCenter = Math.abs(Plinko.ball.x - 200);
                let mult = 0.2; // –¶–µ–Ω—Ç—Ä - –ø—Ä–æ–∏–≥—Ä—ã—à
                
                if(distFromCenter > 150) mult = 10;
                else if(distFromCenter > 100) mult = 3;
                else if(distFromCenter > 70) mult = 1.5;
                else if(distFromCenter > 30) mult = 0.5;
                
                const win = Plinko.betAmount * mult;
                if(win > 0) Wallet.win(win);
                Core.notify(`HIT ${mult}x! (+$${win.toFixed(2)})`);
                Plinko.ball = null;
                Plinko.render();
            },
            
            stop: () => { Plinko.running = false; }
        };

        // --- 9. SYSTEM BOOT ---
        window.onload = () => {
            // –ê–Ω–∏–º–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
            setTimeout(() => {
                document.getElementById('boot-screen').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('boot-screen').style.display = 'none';
                    Core.init(); // –°—Ç–∞—Ä—Ç —Å–∏—Å—Ç–µ–º—ã
                }, 800);
            }, 2500); // 2.5 —Å–µ–∫—É–Ω–¥—ã –∑–∞–≥—Ä—É–∑–∫–∞
        };

    </script>
</body>
</html>
